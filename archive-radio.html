<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="theme-color" content="#0a0a0a">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>ARCHIVE WALKMAN</title>
    <style>
        :root {
            --bg: #0a0a0a;
            --panel: #111;
            --border: #222;
            --accent: #ff6b35;
            --accent2: #00ff88;
            --text: #e8e8e8;
            --dim: #666;
            --safe-top: env(safe-area-inset-top, 0px);
            --safe-bottom: env(safe-area-inset-bottom, 0px);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html,
        body {
            height: 100%;
            overflow: hidden;
            background: var(--bg);
            color: var(--text);
            font-family: 'SF Mono', 'Monaco', monospace;
            touch-action: manipulation;
            -webkit-user-select: none;
            user-select: none;
        }

        .app {
            height: 100%;
            display: flex;
            flex-direction: column;
            padding-top: var(--safe-top);
            padding-bottom: var(--safe-bottom);
        }

        /* HEADER - minimal */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 12px;
            border-bottom: 1px solid var(--border);
            background: #080808;
        }

        .brand {
            font-size: 11px;
            font-weight: bold;
            color: var(--accent);
            letter-spacing: 2px;
        }

        .mode-pills {
            display: flex;
            gap: 4px;
        }

        .pill {
            padding: 4px 8px;
            font-size: 8px;
            border-radius: 10px;
            background: var(--panel);
            border: 1px solid var(--border);
            color: var(--dim);
            cursor: pointer;
        }

        .pill.on {
            background: var(--accent2);
            color: #000;
            border-color: var(--accent2);
        }

        /* VIDEO - Fixed aspect, always visible */
        .video-section {
            flex-shrink: 0;
            background: #000;
            position: relative;
        }

        .video-wrap {
            position: relative;
            width: 100%;
            padding-bottom: 40%;
        }

        .video-wrap iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: none;
        }

        /* NOW PLAYING - Dense */
        .now-playing {
            padding: 10px 12px;
            background: var(--panel);
            border-bottom: 1px solid var(--border);
        }

        .np-row {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .np-main {
            flex: 1;
            min-width: 0;
        }

        .np-artist {
            font-size: 12px;
            font-weight: bold;
            color: var(--accent);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .np-track {
            font-size: 10px;
            color: var(--text);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .np-tags {
            display: flex;
            gap: 6px;
            margin-top: 4px;
        }

        .tag {
            font-size: 8px;
            padding: 2px 6px;
            border-radius: 8px;
            text-transform: uppercase;
        }

        .tag.cat {
            background: rgba(255, 107, 53, 0.2);
            color: var(--accent);
        }

        .tag.sonic {
            background: rgba(0, 255, 136, 0.1);
            color: var(--accent2);
            max-width: 120px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .tag.year {
            color: var(--dim);
            border: 1px solid var(--border);
        }

        /* CONTROLS - Compact transport */
        .controls {
            display: flex;
            gap: 6px;
            padding: 10px 12px;
            background: #080808;
            border-bottom: 1px solid var(--border);
        }

        .ctrl {
            flex: 1;
            padding: 12px 8px;
            background: var(--panel);
            border: 1px solid var(--border);
            border-radius: 6px;
            color: var(--text);
            font-family: inherit;
            font-size: 10px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 4px;
        }

        .ctrl:active {
            transform: scale(0.95);
        }

        .ctrl.primary {
            background: var(--accent);
            color: #000;
            border-color: var(--accent);
        }

        .ctrl.on {
            background: var(--accent2);
            color: #000;
            border-color: var(--accent2);
        }

        /* CATEGORY BAR - Scrollable */
        .cat-bar {
            display: flex;
            gap: 4px;
            padding: 8px 12px;
            overflow-x: auto;
            background: var(--panel);
            border-bottom: 1px solid var(--border);
            -webkit-overflow-scrolling: touch;
        }

        .cat-bar::-webkit-scrollbar {
            display: none;
        }

        .cat-chip {
            flex-shrink: 0;
            padding: 5px 10px;
            font-size: 9px;
            background: #1a1a1a;
            border: 1px solid var(--border);
            border-radius: 12px;
            color: var(--dim);
            cursor: pointer;
            letter-spacing: 1px;
        }

        .cat-chip.active {
            background: var(--accent);
            color: #000;
            border-color: var(--accent);
        }

        .cat-chip span {
            opacity: 0.6;
            margin-left: 2px;
        }

        /* TRACK LIST - Scrollable main area */
        .track-list {
            flex: 1;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
        }

        .track {
            display: flex;
            align-items: center;
            padding: 8px 12px;
            border-bottom: 1px solid var(--border);
            gap: 8px;
            cursor: pointer;
        }

        .track:active {
            background: rgba(255, 107, 53, 0.1);
        }

        .track.playing {
            background: rgba(0, 255, 136, 0.08);
            border-left: 2px solid var(--accent2);
        }

        .t-num {
            width: 20px;
            font-size: 9px;
            color: var(--dim);
            text-align: center;
        }

        .t-info {
            flex: 1;
            min-width: 0;
        }

        .t-artist {
            font-size: 10px;
            color: var(--accent);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .t-title {
            font-size: 9px;
            color: var(--text);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .t-meta {
            font-size: 8px;
            color: var(--dim);
            text-align: right;
        }

        .t-cat {
            display: block;
            text-transform: uppercase;
        }

        /* FOOTER STATS */
        .footer {
            display: flex;
            justify-content: space-around;
            padding: 8px 12px;
            background: #080808;
            border-top: 1px solid var(--border);
            font-size: 9px;
        }

        .stat {
            text-align: center;
        }

        .stat-val {
            color: var(--accent);
            font-weight: bold;
        }

        .stat-lbl {
            color: var(--dim);
            font-size: 7px;
            letter-spacing: 1px;
        }
    </style>
</head>

<body>
    <div class="app">
        <div class="header">
            <span class="brand">ARCHIVE WALKMAN</span>
            <div class="mode-pills">
                <div class="pill on" id="p-auto">AUTO</div>
                <div class="pill" id="p-shuf">SHUF</div>
                <div class="pill" id="p-loop">LOOP</div>
            </div>
        </div>

        <div class="video-section">
            <div class="video-wrap">
                <div id="player"></div>
            </div>
        </div>

        <div class="now-playing">
            <div class="np-row">
                <div class="np-main">
                    <div class="np-artist" id="np-artist">Select a track</div>
                    <div class="np-track" id="np-track">--</div>
                </div>
            </div>
            <div class="np-tags">
                <span class="tag cat" id="np-cat">--</span>
                <span class="tag year" id="np-year">--</span>
                <span class="tag sonic" id="np-sonic">--</span>
            </div>
        </div>

        <div class="controls">
            <button class="ctrl" id="btn-prev">◀◀</button>
            <button class="ctrl primary" id="btn-next">▶▶ NEXT</button>
            <button class="ctrl" id="btn-rand">RND</button>
        </div>

        <div class="cat-bar" id="cats"></div>

        <div class="track-list" id="list"></div>

        <div class="footer">
            <div class="stat"><span class="stat-val" id="s-total">0</span><br><span class="stat-lbl">TOTAL</span></div>
            <div class="stat"><span class="stat-val" id="s-show">0</span><br><span class="stat-lbl">SHOWING</span></div>
            <div class="stat"><span class="stat-val" id="s-played">0</span><br><span class="stat-lbl">PLAYED</span>
            </div>
            <div class="stat"><span class="stat-val" id="s-idx">0</span><br><span class="stat-lbl">INDEX</span></div>
        </div>
    </div>

    <script>
        const A = [
            { a: "Martin Luther King Jr.", t: "I Have a Dream", c: "speech", y: 1963, u: "https://www.youtube.com/watch?v=6dKimoybmEo", s: "Melodic, rising cadence" },
            { a: "Malcolm X", t: "By Any Means Necessary", c: "speech", y: 1964, u: "https://www.youtube.com/watch?v=p-sJl95s1E8", s: "Staccato, percussive" },
            { a: "Stokely Carmichael", t: "Black Power", c: "speech", y: 1966, u: "https://www.youtube.com/watch?v=2lAm2QhFq1o", s: "Call-and-response" },
            { a: "Angela Davis", t: "Freedom is a Constant Struggle", c: "speech", y: 1972, u: "https://www.youtube.com/watch?v=5u1aHpEtWyA", s: "Academic, precise" },
            { a: "Huey P. Newton", t: "Revolutionary Suicide", c: "speech", y: 1973, u: "https://www.youtube.com/watch?v=pS9dsJs_wRo", s: "Philosophical" },
            { a: "Assata Shakur", t: "To My People", c: "speech", y: 1973, u: "https://www.youtube.com/watch?v=KsZpGEReM2E", s: "Revolutionary mantra" },
            { a: "Charlie Chaplin", t: "The Great Dictator", c: "speech", y: 1940, u: "https://www.youtube.com/watch?v=k0CzXi9e66M", s: "Theatrical crescendo" },
            { a: "Winston Churchill", t: "We Shall Fight", c: "speech", y: 1940, u: "https://www.youtube.com/watch?v=D3E6OyHdzTk", s: "Ostinato, bass-heavy" },
            { a: "FDR", t: "Fear Itself", c: "speech", y: 1933, u: "https://www.youtube.com/watch?v=rIKMbma6_dc", s: "Patrician" },
            { a: "Barack Obama", t: "Yes We Can", c: "speech", y: 2008, u: "https://www.youtube.com/watch?v=mi8N5gDVpeg", s: "Call-and-response" },
            { a: "Muhammad Ali", t: "I Am The Greatest", c: "speech", y: 1964, u: "https://www.youtube.com/watch?v=5ro71_ffCK8", s: "Rhythmic, poetic" },
            { a: "Carl Sagan", t: "Pale Blue Dot", c: "speech", y: 1994, u: "https://www.youtube.com/watch?v=OjN-eL2YNsM", s: "Cosmic" },
            { a: "Alan Watts", t: "Dream of Life", c: "speech", y: 1972, u: "https://www.youtube.com/watch?v=omxnKRZ6Pyg", s: "Soothing" },
            { a: "Terence McKenna", t: "Culture Not Your Friend", c: "speech", y: 1999, u: "https://www.youtube.com/watch?v=lBDPM2JpoCM", s: "Radical" },
            { a: "Gil Scott-Heron", t: "Revolution Not Televised", c: "speech", y: 1971, u: "https://www.youtube.com/watch?v=mbv9y00twuI", s: "Spoken word/Jazz" },
            { a: "James Baldwin", t: "Notes Native Son", c: "speech", y: 1965, u: "https://www.youtube.com/watch?v=1TeTFRoXKqs", s: "Intellectual" },
            { a: "Amiri Baraka", t: "Somebody Blew Up America", c: "speech", y: 2002, u: "https://www.youtube.com/watch?v=RmacIBYslr0", s: "Jazz poetry" },
            { a: "James Brown", t: "Get Up Offa That Thing", c: "funk", y: 1976, u: "https://www.youtube.com/watch?v=ZEh9QAmy3lg", s: "High energy" },
            { a: "James Brown", t: "The Payback", c: "funk", y: 1973, u: "https://www.youtube.com/watch?v=FEXt4Qzhyqo", s: "Sparse, reverb" },
            { a: "Sly Stone", t: "Thank You", c: "funk", y: 1969, u: "https://www.youtube.com/watch?v=09bSoxFgaRI", s: "Slap bass" },
            { a: "Parliament", t: "Flash Light", c: "funk", y: 1977, u: "https://www.youtube.com/watch?v=slntNpaqCoE", s: "Synth bass" },
            { a: "Funkadelic", t: "One Nation Under Groove", c: "funk", y: 1978, u: "https://www.youtube.com/watch?v=nmjUvgdzimo", s: "Group vocals" },
            { a: "Earth Wind Fire", t: "September", c: "funk", y: 1978, u: "https://www.youtube.com/watch?v=B2mmDEv0OEk", s: "Horns, hooks" },
            { a: "Kool Gang", t: "Get Down On It", c: "funk", y: 1981, u: "https://www.youtube.com/watch?v=dVbeIjXuoM0", s: "Disco crossover" },
            { a: "The Meters", t: "Cissy Strut", c: "funk", y: 1969, u: "https://www.youtube.com/watch?v=0s-AWl2wzMs", s: "New Orleans" },
            { a: "Curtis Mayfield", t: "Move On Up", c: "funk", y: 1970, u: "https://www.youtube.com/watch?v=zPEaydx_E8Y", s: "Driving horns" },
            { a: "Stevie Wonder", t: "Superstition", c: "funk", y: 1972, u: "https://www.youtube.com/watch?v=7_tmeHCO1IM", s: "Clavinet riff" },
            { a: "Stevie Wonder", t: "Higher Ground", c: "funk", y: 1973, u: "https://www.youtube.com/watch?v=KJlkquCslYU", s: "Moog bass" },
            { a: "Marvin Gaye", t: "What's Going On", c: "funk", y: 1971, u: "https://www.youtube.com/watch?v=u2XoqyVfc8g", s: "Layered vocals" },
            { a: "Marvin Gaye", t: "Got To Give It Up", c: "funk", y: 1977, u: "https://www.youtube.com/watch?v=MgosSnJQCUI", s: "Party ambience" },
            { a: "Al Green", t: "Love and Happiness", c: "funk", y: 1972, u: "https://www.youtube.com/watch?v=wzA-IGQhNiA", s: "Organ groove" },
            { a: "Isaac Hayes", t: "Theme From Shaft", c: "funk", y: 1971, u: "https://www.youtube.com/watch?v=kfdW4687b_w", s: "Wah-wah guitar" },
            { a: "Bill Withers", t: "Lovely Day", c: "funk", y: 1977, u: "https://www.youtube.com/watch?v=IABFp_C8qWw", s: "18-sec note" },
            { a: "Bill Withers", t: "Ain't No Sunshine", c: "funk", y: 1971, u: "https://www.youtube.com/watch?v=lR2sp9tmKmY", s: "Melancholic" },
            { a: "Aretha Franklin", t: "Respect", c: "funk", y: 1967, u: "https://www.youtube.com/watch?v=QS4UZrylKoA", s: "Powerful vocals" },
            { a: "Donna Summer", t: "I Feel Love", c: "disco", y: 1977, u: "https://www.youtube.com/watch?v=u1RqhFGUV9Q", s: "Synth arp" },
            { a: "Chic", t: "Good Times", c: "disco", y: 1979, u: "https://www.youtube.com/watch?v=KVz2GvIh_Gs", s: "Disco bass" },
            { a: "Sister Sledge", t: "Lost In Music", c: "disco", y: 1979, u: "https://www.youtube.com/watch?v=mwVXJvcY45I", s: "Nile guitar" },
            { a: "Bee Gees", t: "Stayin' Alive", c: "disco", y: 1977, u: "https://www.youtube.com/watch?v=zVZyGRPpl0w", s: "Falsetto" },
            { a: "Diana Ross", t: "I'm Coming Out", c: "disco", y: 1980, u: "https://www.youtube.com/watch?v=vwQAdHO0Y-4", s: "Triumphant" },
            { a: "Barry White", t: "Can't Get Enough", c: "disco", y: 1974, u: "https://www.youtube.com/watch?v=laMshX_12us", s: "Deep bass" },
            { a: "Grandmaster Flash", t: "The Message", c: "hiphop", y: 1982, u: "https://www.youtube.com/watch?v=MLpv_HtEaks", s: "Social commentary" },
            { a: "Sugarhill Gang", t: "Rapper's Delight", c: "hiphop", y: 1979, u: "https://www.youtube.com/watch?v=MyMta4RIrlg", s: "Good Times sample" },
            { a: "Run-DMC", t: "It's Like That", c: "hiphop", y: 1983, u: "https://www.youtube.com/watch?v=4KTN6RgfYg8", s: "Drum machine" },
            { a: "Eric B Rakim", t: "Paid In Full", c: "hiphop", y: 1987, u: "https://www.youtube.com/watch?v=LnVHrcRnlZw", s: "Roachclip break" },
            { a: "Public Enemy", t: "Fight The Power", c: "hiphop", y: 1989, u: "https://www.youtube.com/watch?v=jRJKjiCtVco", s: "Dense layers" },
            { a: "Tribe Called Quest", t: "Can I Kick It?", c: "hiphop", y: 1990, u: "https://www.youtube.com/watch?v=M-wpu3avo1Y", s: "Lou Reed sample" },
            { a: "De La Soul", t: "Me Myself and I", c: "hiphop", y: 1989, u: "https://www.youtube.com/watch?v=NerII_Zgd5I", s: "P-Funk sample" },
            { a: "Nas", t: "N.Y. State of Mind", c: "hiphop", y: 1994, u: "https://www.youtube.com/watch?v=LnaWZvXoG-k", s: "Preemo production" },
            { a: "Wu-Tang", t: "C.R.E.A.M.", c: "hiphop", y: 1993, u: "https://www.youtube.com/watch?v=ecRs1sWZIL4", s: "Lo-fi soul" },
            { a: "Dr. Dre", t: "Still D.R.E.", c: "hiphop", y: 1999, u: "https://www.youtube.com/watch?v=F7wxubr1_zg", s: "Piano interp" },
            { a: "OutKast", t: "Hey Ya!", c: "hiphop", y: 2003, u: "https://www.youtube.com/watch?v=ubk1skSE9OA", s: "Pop crossover" },
            { a: "OutKast", t: "B.O.B.", c: "hiphop", y: 2000, u: "https://www.youtube.com/watch?v=swTna2QJMXA", s: "DnB influence" },
            { a: "Kanye West", t: "Through The Wire", c: "hiphop", y: 2003, u: "https://www.youtube.com/watch?v=_WnkTrEp9c8", s: "Chipmunk Soul" },
            { a: "Kendrick Lamar", t: "HUMBLE.", c: "hiphop", y: 2017, u: "https://www.youtube.com/watch?v=ov4WobPqoSA", s: "Piano minimal" },
            { a: "Missy Elliott", t: "Get Ur Freak On", c: "hiphop", y: 2001, u: "https://www.youtube.com/watch?v=36lThf6sdio", s: "Bhangra" },
            { a: "Beyoncé", t: "Crazy In Love", c: "hiphop", y: 2003, u: "https://www.youtube.com/watch?v=T6xbOPSUe8M", s: "Chi-Lites horn" },
            { a: "New Order", t: "Blue Monday", c: "electronic", y: 1983, u: "https://www.youtube.com/watch?v=TsgLhkjY4q0", s: "12-inch legend" },
            { a: "Depeche Mode", t: "Personal Jesus", c: "electronic", y: 1989, u: "https://www.youtube.com/watch?v=rSb_KYzIgUs", s: "Blues/Synth" },
            { a: "Pet Shop Boys", t: "West End Girls", c: "electronic", y: 1985, u: "https://www.youtube.com/watch?v=-G8KmNF-xc4", s: "Synth-pop" },
            { a: "Daft Punk", t: "Around The World", c: "electronic", y: 1997, u: "https://www.youtube.com/watch?v=Jb6gcoR266U", s: "Filter house" },
            { a: "Daft Punk", t: "Da Funk", c: "electronic", y: 1995, u: "https://www.youtube.com/watch?v=PwILkY9gRrc", s: "G-Funk/Acid" },
            { a: "Chemical Bros", t: "Block Rockin Beats", c: "electronic", y: 1997, u: "https://www.youtube.com/watch?v=0kMfTYPzSnI", s: "Big Beat" },
            { a: "Michael Jackson", t: "Wanna Be Startin", c: "pop", y: 1982, u: "https://www.youtube.com/watch?v=DsJlttdkybk", s: "Complex perc" },
            { a: "Prince", t: "Kiss", c: "pop", y: 1986, u: "https://www.youtube.com/watch?v=rH9CZuuKpSg", s: "Minimal funk" },
            { a: "Prince", t: "1999", c: "pop", y: 1982, u: "https://www.youtube.com/watch?v=weUhBGA8mxo", s: "Synth-funk" },
            { a: "Prince", t: "When Doves Cry", c: "pop", y: 1984, u: "https://www.youtube.com/watch?v=dZ1pMu2NT0Q", s: "No bass" },
            { a: "Rihanna", t: "Umbrella", c: "pop", y: 2007, u: "https://www.youtube.com/watch?v=5io69gNOTPk", s: "GarageBand loop" }
        ];

        let Q = [...A], idx = -1, played = 0, cat = 'all', auto = true, shuf = false, loop = false, P = null;

        // YT API
        const tag = document.createElement('script');
        tag.src = "https://www.youtube.com/iframe_api";
        document.head.appendChild(tag);

        function onYouTubeIframeAPIReady() { }

        function vid(u) { const m = u.match(/(?:v=|\/shorts\/|youtu\.be\/)([^&?\/]+)/); return m ? m[1] : null; }

        function load(i) {
            if (i < 0 || i >= Q.length) return;
            const x = Q[i], id = vid(x.u);
            if (P) P.loadVideoById(id);
            else P = new YT.Player('player', { videoId: id, playerVars: { autoplay: 1, controls: 1, modestbranding: 1, rel: 0 }, events: { onStateChange: onEnd } });
            idx = i;
            document.getElementById('np-artist').textContent = x.a;
            document.getElementById('np-track').textContent = x.t;
            document.getElementById('np-cat').textContent = x.c;
            document.getElementById('np-year').textContent = x.y;
            document.getElementById('np-sonic').textContent = x.s;
            document.getElementById('s-idx').textContent = i + 1;
            render();
        }

        function onEnd(e) {
            if (e.data === 0) {
                played++;
                document.getElementById('s-played').textContent = played;
                if (loop) { P.seekTo(0); P.playVideo(); }
                else if (auto) next();
            }
        }

        function next() { idx = shuf ? Math.floor(Math.random() * Q.length) : (idx + 1) % Q.length; load(idx); }
        function prev() { idx = idx <= 0 ? Q.length - 1 : idx - 1; load(idx); }
        function rand() { idx = Math.floor(Math.random() * Q.length); load(idx); }

        function filter(c) {
            cat = c;
            Q = c === 'all' ? [...A] : A.filter(x => x.c === c);
            idx = -1;
            document.querySelectorAll('.cat-chip').forEach(e => e.classList.toggle('active', e.dataset.c === c));
            stats(); render();
        }

        function render() {
            document.getElementById('list').innerHTML = Q.map((x, i) => `
                <div class="track ${i === idx ? 'playing' : ''}" onclick="load(${i})">
                    <div class="t-num">${i + 1}</div>
                    <div class="t-info"><div class="t-artist">${x.a}</div><div class="t-title">${x.t}</div></div>
                    <div class="t-meta"><span class="t-cat">${x.c}</span>${x.y}</div>
                </div>
            `).join('');
        }

        function cats() {
            const c = {}; A.forEach(x => c[x.c] = (c[x.c] || 0) + 1);
            document.getElementById('cats').innerHTML = `<div class="cat-chip active" data-c="all" onclick="filter('all')">ALL<span>${A.length}</span></div>` +
                Object.keys(c).map(k => `<div class="cat-chip" data-c="${k}" onclick="filter('${k}')">${k.toUpperCase()}<span>${c[k]}</span></div>`).join('');
        }

        function stats() {
            document.getElementById('s-total').textContent = A.length;
            document.getElementById('s-show').textContent = Q.length;
        }

        document.getElementById('btn-next').onclick = next;
        document.getElementById('btn-prev').onclick = prev;
        document.getElementById('btn-rand').onclick = rand;

        document.getElementById('p-auto').onclick = function () { auto = !auto; this.classList.toggle('on', auto); };
        document.getElementById('p-shuf').onclick = function () { shuf = !shuf; this.classList.toggle('on', shuf); };
        document.getElementById('p-loop').onclick = function () { loop = !loop; this.classList.toggle('on', loop); };

        cats(); render(); stats();
    </script>
</body>

</html>